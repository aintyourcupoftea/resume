<script>
    document.addEventListener("DOMContentLoaded", function () {
        const form = document.getElementById("registration_form");
        const password = document.getElementById("password");
        const confirmPassword = document.getElementById("confirm_password");
        const passwordError = document.getElementById("password_error");

        form.addEventListener("submit", function (e) {
            const passwordValue = password.value;
            const confirmPasswordValue = confirmPassword.value;

            // Password validation regex: At least 1 uppercase, 1 lowercase, 1 special character, 1 number, min 8 characters
            const passwordRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;

            if (!passwordRegex.test(passwordValue)) {
                e.preventDefault(); // Prevent form submission
                passwordError.style.display = "block";
                passwordError.textContent =
                    "Password must be at least 8 characters long, include 1 uppercase, 1 lowercase, 1 number, and 1 special character.";
                password.classList.add("error-shake");
                setTimeout(() => password.classList.remove("error-shake"), 500);
                return;
            } else {
                passwordError.style.display = "none";
            }

            // Confirm password validation
            if (passwordValue !== confirmPasswordValue) {
                e.preventDefault();
                passwordError.style.display = "block";
                passwordError.textContent = "Passwords do not match.";
                confirmPassword.classList.add("error-shake");
                setTimeout(() => confirmPassword.classList.remove("error-shake"), 500);
                return;
            }
        });
    });
</script>
